(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{381:function(t,e,r){"use strict";r.r(e);var n=r(125),o=r(126),h=(r(16),r(35),r(34),r(71),r(33),r(286),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(263),r(99),r(255)),l=new h.a,c=1,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.canvas,canvas=void 0===r?document.createElement("canvas"):r,o=e.width,h=void 0===o?300:o,l=e.height,d=void 0===l?150:l,f=e.dpr,v=void 0===f?1:f,w=e.alpha,m=void 0!==w&&w,x=e.depth,y=void 0===x||x,E=e.stencil,_=void 0!==E&&E,O=e.antialias,k=void 0!==O&&O,M=e.premultipliedAlpha,A=void 0!==M&&M,F=e.preserveDrawingBuffer,R=void 0!==F&&F,T=e.powerPreference,j=void 0===T?"default":T,S=e.autoClear,B=void 0===S||S,D=e.webgl,C=void 0===D?2:D;Object(n.a)(this,t);var z={alpha:m,depth:y,stencil:_,antialias:k,premultipliedAlpha:A,preserveDrawingBuffer:R,powerPreference:j};this.dpr=v,this.alpha=m,this.color=!0,this.depth=y,this.stencil=_,this.premultipliedAlpha=A,this.autoClear=B,this.id=c++,2===C&&(this.gl=canvas.getContext("webgl2",z)),this.isWebgl2=!!this.gl,this.gl||(this.gl=canvas.getContext("webgl",z)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(h,d),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}return Object(o.a)(t,[{key:"setSize",value:function(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}},{key:"setViewport",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.state.viewport.x=r,this.state.viewport.y=n,this.gl.viewport(r,n,t,e))}},{key:"setScissor",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.gl.scissor(r,n,t,e)}},{key:"enable",value:function(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}},{key:"disable",value:function(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}},{key:"setBlendFunc",value:function(t,e,r,n){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===n||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=n,void 0!==r?this.gl.blendFuncSeparate(t,e,r,n):this.gl.blendFunc(t,e))}},{key:"setBlendEquation",value:function(t,e){t=t||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e||(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}},{key:"setCullFace",value:function(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}},{key:"setFrontFace",value:function(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}},{key:"setDepthMask",value:function(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}},{key:"setDepthFunc",value:function(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}},{key:"activeTexture",value:function(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}},{key:"bindFramebuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,r=void 0===e?this.gl.FRAMEBUFFER:e,n=t.buffer,o=void 0===n?null:n;this.state.framebuffer!==o&&(this.state.framebuffer=o,this.gl.bindFramebuffer(r,o))}},{key:"getExtension",value:function(t,e,r){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}},{key:"sortOpaque",value:function(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program.id!==b.program.id?a.program.id-b.program.id:a.zDepth!==b.zDepth?a.zDepth-b.zDepth:b.id-a.id}},{key:"sortTransparent",value:function(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.zDepth!==b.zDepth?b.zDepth-a.zDepth:b.id-a.id}},{key:"sortUI",value:function(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program.id!==b.program.id?a.program.id-b.program.id:b.id-a.id}},{key:"getRenderList",value:function(t){var e=t.scene,r=t.camera,n=t.frustumCull,o=t.sort,h=[];if(r&&n&&r.updateFrustum(),e.traverse((function(t){if(!t.visible)return!0;t.draw&&(n&&t.frustumCulled&&r&&!r.frustumIntersectsMesh(t)||h.push(t))})),o){var c=[],d=[],f=[];h.forEach((function(t){t.program.transparent?t.program.depthTest?d.push(t):f.push(t):c.push(t),t.zDepth=0,0===t.renderOrder&&t.program.depthTest&&r&&(t.worldMatrix.getTranslation(l),l.applyMatrix4(r.projectionViewMatrix),t.zDepth=l.z)})),c.sort(this.sortOpaque),d.sort(this.sortTransparent),f.sort(this.sortUI),h=c.concat(d,f)}return h}},{key:"render",value:function(t){var e=t.scene,r=t.camera,n=t.target,o=void 0===n?null:n,h=t.update,l=void 0===h||h,c=t.sort,d=void 0===c||c,f=t.frustumCull,v=void 0===f||f,w=t.clear;null===o?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(o),this.setViewport(o.width,o.height)),(w||this.autoClear&&!1!==w)&&(!this.depth||o&&!o.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),l&&e.updateMatrixWorld(),r&&r.updateMatrixWorld(),this.getRenderList({scene:e,camera:r,frustumCull:v,sort:d}).forEach((function(t){t.draw({camera:r})}))}}]),t}(),f=(r(224),r(228)),v=r(223);function w(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Object(v.a)(object)););return object}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var base=w(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:r):desc.value}},m.apply(this,arguments)}var x=r(225),y=r(226),E=r(304),_=r(256);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(v.a)(t);if(e){var o=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(y.a)(this,r)}}var k=new _.a,M=new h.a,A=new h.a,F=function(t){Object(x.a)(r,t);var e=O(r);function r(t){var o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.near,d=void 0===c?.1:c,v=l.far,w=void 0===v?100:v,m=l.fov,x=void 0===m?45:m,y=l.aspect,E=void 0===y?1:y,O=l.left,k=l.right,M=l.bottom,A=l.top,F=l.zoom,R=void 0===F?1:F;return Object(n.a)(this,r),o=e.call(this),Object.assign(Object(f.a)(o),{near:d,far:w,fov:x,aspect:E,left:O,right:k,bottom:M,top:A,zoom:R}),o.projectionMatrix=new _.a,o.viewMatrix=new _.a,o.projectionViewMatrix=new _.a,o.worldPosition=new h.a,o.type=O||k?"orthographic":"perspective","orthographic"===o.type?o.orthographic():o.perspective(),o}return Object(o.a)(r,[{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.near,r=void 0===e?this.near:e,n=t.far,o=void 0===n?this.far:n,h=t.fov,l=void 0===h?this.fov:h,c=t.aspect,d=void 0===c?this.aspect:c;return Object.assign(this,{near:r,far:o,fov:l,aspect:d}),this.projectionMatrix.fromPerspective({fov:l*(Math.PI/180),aspect:d,near:r,far:o}),this.type="perspective",this}},{key:"orthographic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.near,r=void 0===e?this.near:e,n=t.far,o=void 0===n?this.far:n,h=t.left,l=void 0===h?this.left:h,c=t.right,d=void 0===c?this.right:c,f=t.bottom,v=void 0===f?this.bottom:f,w=t.top,m=void 0===w?this.top:w,x=t.zoom,y=void 0===x?this.zoom:x;return Object.assign(this,{near:r,far:o,left:l,right:d,bottom:v,top:m,zoom:y}),l/=y,d/=y,v/=y,m/=y,this.projectionMatrix.fromOrthogonal({left:l,right:d,bottom:v,top:m,near:r,far:o}),this.type="orthographic",this}},{key:"updateMatrixWorld",value:function(){return m(Object(v.a)(r.prototype),"updateMatrixWorld",this).call(this),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}},{key:"lookAt",value:function(t){return m(Object(v.a)(r.prototype),"lookAt",this).call(this,t,!0),this}},{key:"project",value:function(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}},{key:"unproject",value:function(t){return t.applyMatrix4(k.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}},{key:"updateFrustum",value:function(){this.frustum||(this.frustum=[new h.a,new h.a,new h.a,new h.a,new h.a,new h.a]);var t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(var i=0;i<6;i++){var e=1/this.frustum[i].distance();this.frustum[i].multiply(e),this.frustum[i].constant*=e}}},{key:"frustumIntersectsMesh",value:function(t){if(!t.geometry.attributes.position)return!0;if(t.geometry.bounds&&t.geometry.bounds.radius!==1/0||t.geometry.computeBoundingSphere(),!t.geometry.bounds)return!0;var e=M;e.copy(t.geometry.bounds.center),e.applyMatrix4(t.worldMatrix);var r=t.geometry.bounds.radius*t.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(e,r)}},{key:"frustumIntersectsSphere",value:function(t,e){for(var r=A,i=0;i<6;i++){var n=this.frustum[i];if(r.copy(n).dot(t)+n.constant<-e)return!1}return!0}}]),r}(E.a),R=r(259),T=r.n(R),j=r(261),S=r.n(j),B=new(function(){function t(){Object(n.a)(this,t),this.time=0,this.scroll=0,this.scrollTarget=0,this.isMobile="desktop"!==S.a.getParser(window.navigator.userAgent).parsedResult.platform.type,this.windowHeight=window.innerHeight}return Object(o.a)(t,[{key:"init",value:function(){var t=this;this.emitter={},T()(this.emitter),this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.renderer=new d({dpr:window.devicePixelRatio,alpha:!0,transparency:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.gl=this.renderer.gl,this.container=document.createElement("div"),this.container.classList.add("canvas-container"),this.container.style.height=window.innerHeight+"px",this.container.style.width=window.innerWidth+"px",this.container.appendChild(this.gl.canvas),document.body.appendChild(this.container),this.gl.clearColor(0,0,0,0),this.camera=new F(this.gl,{fov:15}),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height}),r.e(0).then(r.bind(null,303)).then((function(e){t.Raf=e.default})),this.camera.position.z=this.isMobile?10:5,this.scene=new E.a,window.addEventListener("resize",this.resize.bind(this))}},{key:"setSize",value:function(t){var e=this;t.height=t.getBoundingClientRect().height,t.height>window.innerHeight&&(this.gl.canvas.style.height=t.height+"px"),setTimeout((function(){e.container.style.top=t.getBoundingClientRect().y+window.scrollY+"px"}),500)}},{key:"setController",value:function(){this.DebugController.addConfig(this.config,"Position")}},{key:"resize",value:function(){this.container.style.height=window.innerHeight+"px",this.container.style.width=window.innerWidth+"px",this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height})}},{key:"scrollListen",value:function(t){}},{key:"destroy",value:function(){var t=this;this.Raf&&setTimeout((function(){t.scene.children.forEach((function(e){t.scene.removeChild(e),requestAnimationFrame((function(){t.update()}))})),t.Raf.unsuscribe("scene"),t.scene.children=[]}),1e3)}},{key:"resume",value:function(){var t=this;this.Raf?this.Raf.suscribe("scene",(function(){t.update()}),30):r.e(0).then(r.bind(null,303)).then((function(e){t.Raf=e.default,t.Raf.suscribe("scene",(function(){t.update()}),30)}))}},{key:"update",value:function(){this.time++,this.renderer.render({scene:this.scene,camera:this.camera})}},{key:"updateScroll",value:function(){}}]),t}());e.default=B}}]);